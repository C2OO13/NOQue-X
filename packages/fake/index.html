<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <script src="./socket.io.js"></script>
  </head>
  <body>
    <input type="text" name="meetId" id="meetId" />
    <input type="text" name="userId" id="userId" />
    <button id="btn">Click</button>
    <h1>Question</h1>
    <input type="text" name="meetId1" id="meetId1" />
    <input type="text" name="questionId" id="questionId" />
    <input type="text" name="userId1" id="userId1" />
    <button id="btn1">Broadcast</button>
    <div id="left"></div>
    <div id="op"></div>
    <div id="question"></div>
  </body>
  <script>
    const socket = io.connect('http://localhost:5000');

    document.getElementById('btn').addEventListener('click', function (e) {
      const meetId = document.getElementById('meetId');
      const userId = document.getElementById('userId');

      socket.emit('joining', {
        meetId: meetId.value,
        userId: userId.value,
      });
    });
    socket.on('joining_success', (data) => {
      document.getElementById('op').innerHTML = JSON.stringify(data, null, 2);
    });
    socket.on('user_left', (data) => {
      document.getElementById('left').innerHTML = JSON.stringify(data, null, 2);
    });

    document.getElementById('btn1').addEventListener('click', function (e) {
      // console.log('Btn1 clicked.');
      const questionId = document.getElementById('questionId');
      const userId = document.getElementById('userId1');
      const meetId = document.getElementById('meetId1');
      try {
        socket.emit('broadcast_question', {
          questionId: questionId.value,
          userId: userId.value,
        });
      } catch (err) {
        console.log(err);
      }
    });

    socket.on('question', (data) => {
      console.log(`actual question`, data);
      //modal to take answer response
      document.getElementById('question').innerHTML = JSON.stringify(
        data,
        null,
        2
      );
    });
  </script>
</html>
